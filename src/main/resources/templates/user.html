<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <head th:replace="header :: common_header(title='Account details')"></head>
    <body>
        <header th:replace="header :: navheader"></header>
        <div id="content">
            <h1>Account details</h1>
            <form action="#" th:action="@{/user/{id}(id=${user.id})}" method="POST">                
                <p><label for="email">Email</label>: <input type="text" name="email" id="email" th:value="${user.email}" /></p>
                <p><label for="password">Password</label>: <input type="password" name="password" id="password" th:value="${user.password}" /></p>
                <p><label for="name">Name</label>: <input type="text" name="name" id="name" th:value="${user.name}" /></p>
                <p><label for="street">Street</label>: <input type="text" name="street" id="street" th:value="${user.street}" /></p>
                <p><label for="postcode">Postcode</label>: <input type="text" name="postcode" id="postcode" th:value="${user.postcode}" /></p>
                <p><label for="city">City</label>: <input type="text" name="city" id="city" th:value="${user.city}" /></p>
                <p><label for="photo">Profile photo</label>: 
                    <input type="button" id="triggerupload" value="Choose file"/>
                    <input type="file" name="upload" id="upload"/></p>
                <p>
                    <input type="hidden" id="photo" name="photo" />
                    <img id="thumbnail" />
                </p>
                <p><input type="submit" value="Submit" /></p>
            </form>
        </div>
        
        <script>
            document.getElementById("upload").addEventListener("change", function(e) {
                var file = e.target.files[0];
                var reader = new FileReader();
                
                reader.onload = function(f) {
                    document.getElementById("thumbnail").src = f.target.result;
                    document.getElementById("photo").value = f.target.name;
                };
                
                reader.readAsDataURL(file);
            });
            
            document.getElementById("triggerupload").addEventListener("click", function(e) {
                document.getElementById("upload").click();
            });
        </script>
    </body>
</html>
